- name: remove exisisting directory
  tags:
  - deployment
  ansible.builtin.file:
    path: " { { APP_LOCATION } }"
    state: "absent"

- name: create app directory
  tags:
  - deployment
  ansible.builtin.file:
    path: " {{ APP_LOCATION }}"
    state: "present"

- name: Download app 
  tags:
  - deployment
  ansible.builtin.get_url:
  url: "https://expense-builds.s3.us-east-1.amazonaws.com/expense-{{ COMPONENT }}-v2.zip"
  dest: "{{ APP_LOCATION }}/{{ COMPONENT }}-v2.zip"

- name: Unarchieve app code
  tags:
  - deployment
  ansible.builtin.unarchive:
  src: "{{ APP_LOCATION }}/{{ COMPONENT }}-v2.zip"
  dest: "{{ APP_LOCATION }}"
  remote_src: yes